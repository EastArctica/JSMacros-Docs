{
  "name": "PerLanguageLibrary",
  "fullClassName": "xyz.wagyourtail.jsmacros.core.library.PerLanguageLibrary",
  "extends": "BaseLibrary",
  "since": "1.0.0",
  "description": "An abstract base class for libraries that are specific to particular scripting languages in JsMacros. This class serves as a foundation for creating library implementations that provide functionality tailored to specific languages (like JavaScript) while being available across the JsMacros system.",
  "overview": "PerLanguageLibrary instances are created once per language type and shared across all scripts using that language. This makes them ideal for storing language-specific utilities, helpers, or state that should persist between script executions but be isolated between different language types.\n\nThe PerLanguageLibrary class is designed to: provide language-specific functionality (for libraries that need to expose different APIs or behavior based on the scripting language being used), share state across scripts (to maintain shared state between different scripts running in the same language), optimize resource usage (to avoid recreating language-specific resources for each script execution), and enable language extensions (to allow for language-specific optimizations or helper methods).\n\nKey Characteristics include:\n- Abstract class: Cannot be instantiated directly, must be extended by concrete implementations.\n- Language binding: Each instance is associated with a specific `BaseLanguage` implementation.\n- Single instance per language: Only one instance is created for each language type in the JsMacros runtime.\n- Persistent state: Maintains state across multiple script executions within the same language.\n\nPerLanguageLibrary implementations are automatically discovered and registered during JsMacros startup. The JsMacros library registry creates instances through a process of discovery (classes extending `PerLanguageLibrary` with `@Library` annotation are found), language filtering (only instances for available/compatible languages are created), single instantiation (one instance per language type is created and stored), and script access (instances are made available to scripts through the global variable specified in `@Library`).\n\nUsage patterns include creating libraries that provide utilities specific to a language's strengths, maintaining shared state between scripts, and providing language-specific integration points.\n\nWhen comparing with other library types:\n- `BaseLibrary`: A single instance shared across ALL languages and scripts. Use when functionality should be identical for all languages, state needs to be shared across all scripts, and no language-specific behavior is required.\n- `PerLanguageLibrary`: One instance per language type. Use when different behavior is needed per language, state should be shared within a language but isolated between languages, or language-specific optimizations/utilities are required.\n- `PerExecLibrary`: A new instance for each script execution. Use when each script needs its own isolated state, the library depends on script context, or no sharing between script executions is desired.\n- `PerExecLanguageLibrary`: A new instance per script execution AND language. Use when both script-specific and language-specific behavior are needed, or maximum isolation is required.\n\nBest Practices:\nGood candidates for using PerLanguageLibrary include language-specific utilities or helpers, shared state within a language, language optimizations, and integration with language-specific features. Poor candidates are global functionality identical across all languages (use `BaseLibrary`), per-script isolated state (use `PerExecLibrary`), or simple utility functions (consider static methods).\n\nDesign Considerations: Since instances are shared, ensure thread safety if accessed concurrently. Be mindful of memory usage when storing large amounts of shared data. Maintain language isolation to avoid leaking language-specific dependencies to other languages. Implement robust error handling for cases where required language features aren't available.\n\nPerformance Tips: Consider caching expensive operations and pre-initializing language-specific resources once during construction.\n\nThe `PerLanguageLibrary` class provides a powerful foundation for creating language-specific functionality in JsMacros while maintaining clean separation between different scripting languages. By understanding when and how to use this class, developers can create libraries that leverage the unique strengths of each language while providing consistent interfaces across the JsMacros ecosystem. When designing libraries, carefully consider whether functionality should be global, per-language, per-execution, or a combination of these approaches to ensure the most appropriate and efficient implementation.",
  "constructors": [
    {
      "signature": "public PerLanguageLibrary(Class<? extends BaseLanguage<?, ?>> language)",
      "description": "Initializes the PerLanguageLibrary instance, associating it with a specific scripting language for which it provides tailored functionality. As an abstract class, this constructor is intended to be called by concrete subclass implementations.",
      "parameters": [
        {
          "name": "language",
          "type": "Class<? extends BaseLanguage<?, ?>>",
          "description": "The class object representing the scripting language this library instance will serve. This allows the library to provide language-specific utilities or state, and enables the library to identify and adapt to its assigned language."
        }
      ]
    }
  ],
  "methods": []
}